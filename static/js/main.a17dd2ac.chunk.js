(this["webpackJsonpimage-classification"]=this["webpackJsonpimage-classification"]||[]).push([[0],{65:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n.n(c),a=n(17),i=n.n(a),r=n(8),o=n(9),u=n(12),l=n(11),d=n(66),j=n(35),g=n(7),p=n.n(g),b=n(14),m=n.n(b),h=n(6),O=n(1),f=[],x=[],y=[],I=[],v={},N={},k=Object(h.b)((function(e){return{userId:e.auth.userId}}))((function(e){var t=Object(c.useState)(0),n=Object(j.a)(t,2),a=n[0],i=n[1],r=s.a.useRef(null),o=s.a.useRef(null),u=s.a.useRef(null),l=s.a.useRef(null),g=s.a.useCallback((function(){for(var e=0;e<10;e++)try{var t=r.current.getScreenshot().split(",").pop();f.push(t),document.getElementById("upcount").innerHTML="Captured Images for UP: "+f.length}catch(n){document.getElementById("status").innerHTML="Grant camera permissions";break}}),[r]),b=s.a.useCallback((function(){for(var e=0;e<10;e++)try{var t=o.current.getScreenshot().split(",").pop();x.push(t),document.getElementById("downcount").innerHTML="Captured Images for DOWN: "+x.length}catch(n){document.getElementById("status").innerHTML="Grant camera permissions";break}}),[o]),h=s.a.useCallback((function(){for(var e=0;e<10;e++)try{var t=u.current.getScreenshot().split(",").pop();y.push(t),document.getElementById("leftcount").innerHTML="Captured Images for LEFT:"+y.length}catch(n){document.getElementById("status").innerHTML="Grant camera permissions";break}}),[u]),k=s.a.useCallback((function(){for(var e=0;e<10;e++)try{var t=l.current.getScreenshot().split(",").pop();I.push(t),document.getElementById("rightcount").innerHTML="Captured Images for RIGHT: "+I.length}catch(n){document.getElementById("status").innerHTML="Grant camera permissions";break}}),[l]),S=function(e,t){var n=JSON.stringify(Object.assign({},t)),c=JSON.parse(n);v[e]=c};return Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"ui segment ",style:{textAlign:"center",fontSize:"20px"},children:"Data Collection"}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col"}),Object(O.jsxs)("div",{className:"col",style:{margin:"0 auto",textAlign:"center"},children:[Object(O.jsx)(p.a,{onClick:g,audio:!1,ref:r,screenshotFormat:"image/jpg",width:320}),Object(O.jsx)("p",{id:"upcount",style:{textAlign:"center"},children:"Captured Images for UP: 0"})]}),Object(O.jsx)("div",{className:"col"})]}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"col",style:{margin:"0 auto",textAlign:"center"},children:[Object(O.jsx)(p.a,{onClick:h,audio:!1,ref:u,screenshotFormat:"image/jpg",width:320}),Object(O.jsx)("p",{id:"leftcount",style:{textAlign:"center"},children:"Captured Images for LEFT: 0"})]}),Object(O.jsxs)("div",{className:"col",style:{margin:"0 auto",textAlign:"center"},children:[Object(O.jsx)("button",{onClick:function(){document.getElementById("status").innerHTML="Training...",document.getElementById("status").style.fontSize="25px";var t=f.length,n=y.length,c=I.length,s=x.length;S("up",f),S("down",x),S("right",y),S("left",I),N.finalJson=v,N.userId=e.userId,console.log(N),t>=10&&n>=10&&s>=10&&c>=10?m.a.post("https://15.207.67.182:5000/upload",N).then((function(t){return m.a.post("https://15.207.67.182:5000/train_data",{idd:e.userId}).then((function(e){return i(1)}))})).catch((function(e){e.response||(document.getElementById("status").innerHTML="NETWORK ERROR",document.getElementById("status").style.fontSize="25px")})):(document.getElementById("status").innerHTML="Enter missing DATA",document.getElementById("status").style.fontSize="25px")},className:"ui button",style:{marginTop:"25%"},children:"Train"}),Object(O.jsxs)("div",{children:[Object(O.jsx)("p",{id:"status",style:{margin:"0 auto",textAlign:"center"}}),0==a?void 0:(document.getElementById("status").innerHTML="Trained",document.getElementById("status").style.fontSize="25px",Object(O.jsx)("button",{className:"ui button",style:{marginTop:"3%"},onClick:function(){return Object(O.jsx)(d.a,{to:"/yap/playground"})},children:"Next"}))]})]}),Object(O.jsxs)("div",{className:"col",style:{margin:"0 auto",textAlign:"center"},children:[Object(O.jsx)(p.a,{onClick:k,audio:!1,ref:l,screenshotFormat:"image/jpg",width:320}),Object(O.jsx)("p",{id:"rightcount",style:{textAlign:"center"},children:"Captured Images for RIGHT: 0"})]})]}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col"}),Object(O.jsxs)("div",{className:"col",style:{margin:"0 auto",textAlign:"center"},children:[Object(O.jsx)(p.a,{onClick:b,audio:!1,ref:o,screenshotFormat:"image/jpg",width:320}),Object(O.jsx)("p",{id:"downcount",style:{textAlign:"center"},children:"Captured Images for DOWN: 0"})]}),Object(O.jsx)("div",{className:"col"})]}),Object(O.jsx)("div",{})]})})),S=1,T=Object(h.b)((function(e){return{userId:e.auth.userId}}))((function(e){var t=s.a.useRef(null),n=s.a.useCallback((function(){var c=t.current.getScreenshot().split(",").pop();m.a.post("https://15.207.67.182:5000/predict",{imageSrc:c,idd:e.userId}).then((function(e){return t=e.data.Predicted,void(S&&(document.getElementById("status").innerHTML=0==t?"DOWN":1==t?"RIGHT":2==t?"LEFT":"UP",setTimeout(n,500)));var t}))}),[t]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h1",{children:Object(O.jsx)("p",{id:"status"})}),Object(O.jsx)(p.a,{audio:!1,height:640,ref:t,screenshotFormat:"image/jpg",width:320}),Object(O.jsx)("button",{onClick:function(){S=1,n()},children:"Start"}),Object(O.jsx)("button",{onClick:function(){return S=0},children:"Stop"})]})})),w=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).login=function(){window.FB.login((function(t){e.props.signIn(t.authResponse.userID),d.a}))},e.logout=function(){window.FB.logout((function(){e.props.signOut(),d.a}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.fbAsyncInit=function(){window.FB.init({appId:"2260742510736157",version:"v2.7"}),window.FB.getLoginStatus((function(t){"connected"==t.status?(e.props.signIn(t.authResponse.userID),d.a):e.props.signOut()}))}}},{key:"renderAuthButton",value:function(){return"connected"===this.props.isSignedIn?Object(O.jsxs)("button",{onClick:this.logout,className:"ui blue facebook button",children:[Object(O.jsx)("i",{className:"facebook icon"}),"Sign Out"]}):Object(O.jsxs)("button",{onClick:this.login,className:"ui blue facebook button",children:[Object(O.jsx)("i",{className:"facebook icon"}),"Sign In"]})}},{key:"render",value:function(){return Object(O.jsx)("div",{children:this.renderAuthButton()})}}]),n}(s.a.Component),C=Object(h.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return{type:"SIGN_IN",payload:e}},signOut:function(){return{type:"SIGN_OUT"}}})(w),B=function(){return Object(O.jsx)("div",{className:"ui segment ",children:Object(O.jsx)(C,{})})},E=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{children:"Landing page"})}}]),n}(s.a.Component),L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{children:Object(O.jsxs)(d.c,{children:[Object(O.jsx)(B,{}),Object(O.jsx)(d.b,{path:"/yap/",exact:!0,component:E}),Object(O.jsx)(d.b,{path:"/yap/data-collection",component:k}),Object(O.jsx)(d.b,{path:"/yap/playground",component:T})]})})}}]),n}(c.Component),A=(n(64),n(10)),H=n(16),M={isSignedIn:"unknown",userId:""},R=Object(A.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(H.a)(Object(H.a)({},e),{},{isSignedIn:"connected",userId:t.payload});case"SIGN_OUT":return Object(H.a)(Object(H.a)({},e),{},{isSignedIn:"unknown",userId:"null"});default:return e}}}),F=Object(A.c)(R);i.a.render(Object(O.jsx)(h.a,{store:F,children:Object(O.jsx)(L,{})}),document.querySelector("#root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.a17dd2ac.chunk.js.map